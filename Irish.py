import asyncio
import random
from aiogram import Bot, Dispatcher, types
from aiogram.types import Message
from aiogram.filters import Command
from aiogram.enums import ParseMode
from aiogram.utils.keyboard import ReplyKeyboardBuilder
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from apscheduler.triggers.cron import CronTrigger

TOKEN = "7896777201:AAGRAPZW2Er_TGZlRUYlmc5AmLj5xCkmsEU"
CHAT_ID = 1234933498

bot = Bot(token=TOKEN)
dp = Dispatcher()
scheduler = AsyncIOScheduler()

# –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
compliments = [
    "–¢—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏. –° –∫–∞–∂–¥—ã–º –¥–Ω—ë–º —è —ç—Ç–æ —á—É–≤—Å—Ç–≤—É—é –≤—Å—ë —Å–∏–ª—å–Ω–µ–µ.",
    "–° —Ç–æ–±–æ–π —è —Å–∞–º—ã–π —Å—á–∞—Å—Ç–ª–∏–≤—ã–π —á–µ–ª–æ–≤–µ–∫ –Ω–∞ —Å–≤–µ—Ç–µ.",
    "–¢—ã –º–æ–π –Ω–µ–∂–Ω–µ–π—à–∏–π –∫–æ—Ç—ë–Ω–æ–∫. –ü—Ä–æ—Å—Ç–æ –Ω–µ –º–æ–≥—É –Ω–∞–ª—é–±–æ–≤–∞—Ç—å—Å—è —Ç–æ–±–æ–π.",
    "–ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ, –ø—Ä–æ—Å—ã–ø–∞—è—Å—å —Ä—è–¥–æ–º, —è –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ –º–Ω–µ –ø–æ–≤–µ–∑–ª–æ —Å —Ç–æ–±–æ–π.",
    "–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ–π –ª–∏—á–Ω—ã–π –∞–Ω—Ç–∏—Å—Ç—Ä–µ—Å—Å.",
    "–Ø —Ö–æ—á—É –ø—Ä–æ–∂–∏—Ç—å —Å —Ç–æ–±–æ–π –≤—Å—é –∂–∏–∑–Ω—å ‚Äî –∏ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –Ω–∞–ø–æ–ª–Ω—è—Ç—å –ª—é–±–æ–≤—å—é.",
    "–ö–æ–≥–¥–∞ —Ç—ã —Ä—è–¥–æ–º, –≤—Å—ë –≤–æ–∫—Ä—É–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–≤–µ—Ç–ª–µ–µ –∏ —Ç–µ–ø–ª–µ–µ.",
    "–¢—ã ‚Äî —Å–∞–º–æ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.",
    "–Ø –≤–ª—é–±–ª—è—é—Å—å –≤ —Ç–µ–±—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞, –¥–∞–∂–µ –ø—Ä–æ—Å—Ç–æ –≥–ª—è–¥—è –Ω–∞ —Ç–µ–±—è.",
    "–î–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã –∑–ª–∏—à—å—Å—è ‚Äî —Ç—ã –æ—á–∞—Ä–æ–≤–∞—Ç–µ–ª—å–Ω–∞. –ò —ç—Ç–æ –ø—Ä–∞–≤–¥–∞.",
    "–¢—ã —Å–∞–º–∞—è-—Å–∞–º–∞—è –ª—É—á—à–∞—è –Ω–∞ —Å–≤–µ—Ç–µ.",
    "–¢—ã ‚Äî –∂–µ–Ω—â–∏–Ω–∞ –º–æ–µ–π –º–µ—á—Ç—ã. –ò –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π ‚Äî –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —á—Ç–æ –º–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è.",
    "–¢—ã ‚Äî –º–æ–π –ª—É—á–∏–∫ —Å–æ–ª–Ω—Ü–∞, –¥–∞–∂–µ –≤ –ø–∞—Å–º—É—Ä–Ω—ã–µ –¥–Ω–∏.",
    "–° —Ç–æ–±–æ–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —ç—Ç–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—á–µ—Ç—Å—è –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.",
    "–Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å—É–¥—å–±–µ –∑–∞ —Ç–µ–±—è ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å.",
    "–ö–æ–≥–¥–∞ —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –º–µ–Ω—è ‚Äî —É –º–µ–Ω—è –≤–Ω—É—Ç—Ä–∏ –≤—Å—ë –∑–∞–º–∏—Ä–∞–µ—Ç.",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ—é –∂–∏–∑–Ω—å –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–π, –∫—Ä–∞—Å–∏–≤–æ–π –∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –∂–∏–≤–æ–π.",
    "–¢—ã –º–æ—è –ò—Ä–∞–Ω–¥–µ–ª—å.",
    "–í —Ç–µ–±–µ —Å—Ç–æ–ª—å–∫–æ —Ç–µ–ø–ª–∞, —á—Ç–æ –º–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –µ–≥–æ –¥–∞–∂–µ –≤ —Å–∞–º—ã–µ —Å–ª–æ–∂–Ω—ã–µ –¥–Ω–∏.",
    "–•–æ—á—É –ø—Ä–æ–∂–∏—Ç—å —Å —Ç–æ–±–æ–π –≤—Å—é –∂–∏–∑–Ω—å."
]

@dp.message(Command("start"))
async def start(message: Message):
    kb = ReplyKeyboardBuilder()
    kb.button(text="‚ù§Ô∏è –õ—é–±–∏–º–æ–π –ò—Ä–∏—à–∫–µ")
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç-–∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –æ—Ç —Ç–≤–æ–µ–≥–æ –º—É–∂–∞ ü•∞\n–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, –∏ —è —Å–∫–∞–∂—É —Ç–µ–±–µ —á—Ç–æ-—Ç–æ —Ç—ë–ø–ª–æ–µ.",
        reply_markup=kb.as_markup(resize_keyboard=True)
    )

    global CHAT_ID
    CHAT_ID = message.chat.id  # –°–æ—Ö—Ä–∞–Ω—è–µ–º ID, –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é

@dp.message(lambda msg: msg.text == "‚ù§Ô∏è –õ—é–±–∏–º–æ–π –ò—Ä–∏—à–∫–µ")
async def send_compliment(message: Message):
    compliment = random.choice(compliments)
    await message.answer(compliment)

async def scheduled_compliment():
    if CHAT_ID:
        compliment = random.choice(compliments)
        await bot.send_message(chat_id=CHAT_ID, text=compliment)

async def main():
    # –†–∞—Å—Å—ã–ª–∫–∞ –≤ 08:00
    scheduler.add_job(scheduled_compliment, CronTrigger(hour=8, minute=0))
    # –†–∞—Å—Å—ã–ª–∫–∞ –≤ 21:00
    scheduler.add_job(scheduled_compliment, CronTrigger(hour=21, minute=0))
    scheduler.start()
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())